OBJECT Page 1007 Job Planning Lines
{
  OBJECT-PROPERTIES
  {
    Date=23/01/17;
    Time=12:00:00;
    Version List=NAVW110.00.00.15052;
  }
  PROPERTIES
  {
    CaptionML=[ENU=Job Planning Lines;
               ENG=Job Planning Lines];
    SourceTable=Table1003;
    DataCaptionExpr=Caption;
    PageType=List;
    AutoSplitKey=Yes;
    PromotedActionCategoriesML=[ENU=New,Process,Report,Outlook;
                                ENG=New,Process,Report,Outlook];
    OnInit=VAR
             SMTPMailSetup@1000 : Record 409;
             MailManagement@1001 : Codeunit 9520;
           BEGIN
             UnitCostEditable := TRUE;
             LineAmountEditable := TRUE;
             LineDiscountPctEditable := TRUE;
             LineDiscountAmountEditable := TRUE;
             UnitPriceEditable := TRUE;
             WorkTypeCodeEditable := TRUE;
             LocationCodeEditable := TRUE;
             VariantCodeEditable := TRUE;
             UnitOfMeasureCodeEditable := TRUE;
             DescriptionEditable := TRUE;
             NoEditable := TRUE;
             TypeEditable := TRUE;
             DocumentNoEditable := TRUE;
             CurrencyDateEditable := TRUE;
             PlanningDateEditable := TRUE;

             JobTaskNoVisible := TRUE;

             CanSendToCalendar := MailManagement.IsSMTPEnabled AND NOT SMTPMailSetup.ISEMPTY;
           END;

    OnOpenPage=VAR
                 Job@1000 : Record 167;
               BEGIN
                 IF Job.GET(JobNo) THEN
                   CurrPage.EDITABLE(NOT (Job.Blocked = Job.Blocked::All));

                 IF ActiveField = 1 THEN;
                 IF ActiveField = 2 THEN;
                 IF ActiveField = 3 THEN;
                 IF ActiveField = 4 THEN;
               END;

    OnNewRecord=BEGIN
                  SetUpNewLine(xRec);
                END;

    OnModifyRecord=BEGIN
                     IF "System-Created Entry" THEN BEGIN
                       IF CONFIRM(Text001,FALSE) THEN
                         "System-Created Entry" := FALSE
                       ELSE
                         ERROR('');
                     END;
                   END;

    OnAfterGetCurrRecord=BEGIN
                           SetEditable("Qty. Transferred to Invoice" = 0);
                         END;

    ActionList=ACTIONS
    {
      { 1900000003;0 ;ActionContainer;
                      ActionContainerType=RelatedInformation }
      { 127     ;1   ;ActionGroup;
                      CaptionML=[ENU=Job Planning &Line;
                                 ENG=Job Planning &Line];
                      Image=Line }
      { 129     ;2   ;Action    ;
                      ShortCutKey=Ctrl+F7;
                      CaptionML=[ENU=Linked Job Ledger E&ntries;
                                 ENG=Linked Job Ledger E&ntries];
                      ToolTipML=[ENU=View job ledger entries related to the job planning line.;
                                 ENG=View job ledger entries related to the job planning line.];
                      ApplicationArea=#Suite;
                      Image=JobLedger;
                      OnAction=VAR
                                 JobLedgerEntry@1001 : Record 169;
                                 JobUsageLink@1000 : Record 1020;
                               BEGIN
                                 JobUsageLink.SETRANGE("Job No.","Job No.");
                                 JobUsageLink.SETRANGE("Job Task No.","Job Task No.");
                                 JobUsageLink.SETRANGE("Line No.","Line No.");

                                 IF JobUsageLink.FINDSET THEN
                                   REPEAT
                                     JobLedgerEntry.GET(JobUsageLink."Entry No.");
                                     JobLedgerEntry.MARK := TRUE;
                                   UNTIL JobUsageLink.NEXT = 0;

                                 JobLedgerEntry.MARKEDONLY(TRUE);
                                 PAGE.RUN(PAGE::"Job Ledger Entries",JobLedgerEntry);
                               END;
                                }
      { 128     ;2   ;Action    ;
                      AccessByPermission=TableData 27=R;
                      CaptionML=[ENU=&Reservation Entries;
                                 ENG=&Reservation Entries];
                      ToolTipML=[ENU=View all reservations that are made for the item on the job planning line, either by you manually or automatically.;
                                 ENG=View all reservations that are made for the item on the job planning line, either by you manually or automatically.];
                      ApplicationArea=#Suite;
                      Image=ReservationLedger;
                      OnAction=BEGIN
                                 ShowReservationEntries(TRUE);
                               END;
                                }
      { 133     ;2   ;Separator  }
      { 134     ;2   ;Action    ;
                      Name=OrderPromising;
                      CaptionML=[ENU=Order &Promising;
                                 ENG=Order &Promising];
                      ToolTipML=[ENU=Calculate the shipment and delivery dates based on the item's known and expected availability dates, and then promise the dates to the customer.;
                                 ENG=Calculate the shipment and delivery dates based on the item's known and expected availability dates, and then promise the dates to the customer.];
                      ApplicationArea=#Suite;
                      Image=OrderPromising;
                      OnAction=BEGIN
                                 ShowOrderPromisingLine;
                               END;
                                }
      { 22      ;2   ;Action    ;
                      Name=SendToCalendar;
                      AccessByPermission=TableData 1034=RIM;
                      CaptionML=[ENU=Send to Calendar;
                                 ENG=Send to Calendar];
                      ToolTipML=[ENU=Create a calendar appointment for the resource on each job planning line.;
                                 ENG=Create a calendar appointment for the resource on each job planning line.];
                      ApplicationArea=#Jobs;
                      RunObject=Codeunit 1034;
                      RunPageOnRec=Yes;
                      Promoted=Yes;
                      Visible=CanSendToCalendar;
                      Image=CalendarChanged;
                      PromotedCategory=Category4 }
      { 1900000004;0 ;ActionContainer;
                      ActionContainerType=ActionItems }
      { 91      ;1   ;ActionGroup;
                      CaptionML=[ENU=F&unctions;
                                 ENG=F&unctions];
                      Image=Action }
      { 19      ;2   ;Action    ;
                      Name=CreateJobJournalLines;
                      CaptionML=[ENU=Create Job &Journal Lines;
                                 ENG=Create Job &Journal Lines];
                      ToolTipML=[ENU=Use a batch job to help you create sales journal lines for the involved job planning lines.;
                                 ENG=Use a batch job to help you create sales journal lines for the involved job planning lines.];
                      ApplicationArea=#Jobs;
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=PostOrder;
                      PromotedCategory=Process;
                      OnAction=VAR
                                 JobPlanningLine@1002 : Record 1003;
                                 JobJnlLine@1004 : Record 210;
                                 JobTransferLine@1000 : Codeunit 1004;
                                 JobTransferJobPlanningLine@1003 : Page 1014;
                               BEGIN
                                 IF JobTransferJobPlanningLine.RUNMODAL = ACTION::OK THEN BEGIN
                                   JobPlanningLine.COPY(Rec);
                                   CurrPage.SETSELECTIONFILTER(JobPlanningLine);

                                   IF JobPlanningLine.FINDSET THEN
                                     REPEAT
                                       JobTransferLine.FromPlanningLineToJnlLine(
                                         JobPlanningLine,JobTransferJobPlanningLine.GetPostingDate,JobTransferJobPlanningLine.GetJobJournalTemplateName,
                                         JobTransferJobPlanningLine.GetJobJournalBatchName,JobJnlLine);
                                     UNTIL JobPlanningLine.NEXT = 0;

                                   CurrPage.UPDATE(FALSE);
                                   MESSAGE(Text002,JobPlanningLine.TABLECAPTION,JobJnlLine.TABLECAPTION);
                                 END;
                               END;
                                }
      { 14      ;2   ;Action    ;
                      CaptionML=[ENU=&Open Job Journal;
                                 ENG=&Open Job Journal];
                      ToolTipML=[ENU=Open the job journal, for example, to post usage for a job.;
                                 ENG=Open the job journal, for example, to post usage for a job.];
                      ApplicationArea=#Jobs;
                      RunObject=Page 201;
                      RunPageLink=Job No.=FIELD(Job No.),
                                  Job Task No.=FIELD(Job Task No.);
                      Promoted=Yes;
                      Image=Journals;
                      PromotedCategory=Process }
      { 16      ;2   ;Separator  }
      { 51      ;2   ;Action    ;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Create &Sales Invoice;
                                 ENG=Create &Sales Invoice];
                      ToolTipML=[ENU=Use a batch job to help you create sales invoices for the involved job tasks.;
                                 ENG=Use a batch job to help you create sales invoices for the involved job tasks.];
                      ApplicationArea=#Jobs;
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=JobSalesInvoice;
                      PromotedCategory=Process;
                      OnAction=BEGIN
                                 CreateSalesInvoice(FALSE);
                               END;
                                }
      { 60      ;2   ;Action    ;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Create Sales &Credit Memo;
                                 ENG=Create Sales &Credit Memo];
                      ToolTipML=[ENU=Create a sales credit memo for the selected job planning line.;
                                 ENG=Create a sales credit memo for the selected job planning line.];
                      ApplicationArea=#Jobs;
                      Promoted=Yes;
                      Image=CreditMemo;
                      PromotedCategory=Process;
                      OnAction=BEGIN
                                 CreateSalesInvoice(TRUE);
                               END;
                                }
      { 69      ;2   ;Action    ;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Sales &Invoices/Credit Memos;
                                 ENG=Sales &Invoices/Credit Memos];
                      ToolTipML=[ENU=View sales invoices or sales credit memos that are related to the selected job.;
                                 ENG=View sales invoices or sales credit memos that are related to the selected job.];
                      ApplicationArea=#Jobs;
                      Promoted=Yes;
                      Image=GetSourceDoc;
                      PromotedCategory=Process;
                      OnAction=BEGIN
                                 JobCreateInvoice.GetJobPlanningLineInvoices(Rec);
                               END;
                                }
      { 123     ;2   ;Separator  }
      { 124     ;2   ;Action    ;
                      Name=Reserve;
                      Ellipsis=Yes;
                      CaptionML=[ENU=&Reserve;
                                 ENG=&Reserve];
                      ToolTipML=[ENU=Reserve one or more units of the item on the job planning line, either from inventory or from incoming supply.;
                                 ENG=Reserve one or more units of the item on the job planning line, either from inventory or from incoming supply.];
                      ApplicationArea=#Jobs;
                      Image=Reserve;
                      OnAction=BEGIN
                                 ShowReservation;
                               END;
                                }
      { 132     ;2   ;Action    ;
                      CaptionML=[ENU=Order &Tracking;
                                 ENG=Order &Tracking];
                      ToolTipML=[ENU=Tracks the connection of a supply to its corresponding demand. This can help you find the original demand that created a specific production order or purchase order.;
                                 ENG=Tracks the connection of a supply to its corresponding demand. This can help you find the original demand that created a specific production order or purchase order.];
                      ApplicationArea=#Jobs;
                      Image=OrderTracking;
                      OnAction=BEGIN
                                 ShowTracking;
                               END;
                                }
      { 130     ;2   ;Separator  }
      { 131     ;2   ;Action    ;
                      Name=DemandOverview;
                      CaptionML=[ENU=&Demand Overview;
                                 ENG=&Demand Overview];
                      ToolTipML=[ENU=Get an overview of demand planning related to jobs, such as the availability of spare parts or other items that you may use in a job. For example, you can determine whether the item you need is in stock, and if it is not, you can determine when the item will be in stock.;
                                 ENG=Get an overview of demand planning related to jobs, such as the availability of spare parts or other items that you may use in a job. For example, you can determine whether the item you need is in stock, and if it is not, you can determine when the item will be in stock.];
                      ApplicationArea=#Suite;
                      Image=Forecast;
                      OnAction=VAR
                                 DemandOverview@1000 : Page 5830;
                               BEGIN
                                 DemandOverview.SetCalculationParameter(TRUE);

                                 DemandOverview.Initialize(0D,3,"Job No.",'','');
                                 DemandOverview.RUNMODAL;
                               END;
                                }
      { 1900000006;0 ;ActionContainer;
                      ActionContainerType=Reports }
      { 1903776506;1 ;Action    ;
                      CaptionML=[ENU=Job Actual to Budget;
                                 ENG=Job Actual to Budget];
                      ToolTipML=[ENU=Compare scheduled and usage amounts for selected jobs. All lines of the selected job show quantity, total cost, and line amount.;
                                 ENG=Compare scheduled and usage amounts for selected jobs. All lines of the selected job show quantity, total cost, and line amount.];
                      ApplicationArea=#Jobs;
                      RunObject=Report 1009;
                      Promoted=Yes;
                      Image=Report;
                      PromotedCategory=Report }
      { 1901542506;1 ;Action    ;
                      CaptionML=[ENU=Job Analysis;
                                 ENG=Job Analysis];
                      ToolTipML=[ENU=Analyze the job, such as the scheduled prices, usage prices, and contract prices, and then compares the three sets of prices.;
                                 ENG=Analyse the job, such as the scheduled prices, usage prices, and contract prices, and then compares the three sets of prices.];
                      ApplicationArea=#Jobs;
                      RunObject=Report 1008;
                      Promoted=Yes;
                      Image=Report;
                      PromotedCategory=Report }
      { 1902943106;1 ;Action    ;
                      CaptionML=[ENU=Job - Planning Lines;
                                 ENG=Job - Planning Lines];
                      ToolTipML=[ENU=View all planning lines for the job. You use this window to plan what items, resources, and general ledger expenses that you expect to use on a job (Budget) or you can specify what you actually agreed with your customer that he should pay for the job (Billable).;
                                 ENG=View all planning lines for the job. You use this window to plan what items, resources, and general ledger expenses that you expect to use on a job (Budget) or you can specify what you actually agreed with your customer that he should pay for the job (Billable).];
                      ApplicationArea=#Jobs;
                      RunObject=Report 1006;
                      Promoted=Yes;
                      Image=Report;
                      PromotedCategory=Report }
      { 1903186006;1 ;Action    ;
                      CaptionML=[ENU=Job - Suggested Billing;
                                 ENG=Job - Suggested Billing];
                      ToolTipML=[ENU=View a list of all jobs, grouped by customer, how much the customer has already been invoiced, and how much remains to be invoiced, that is, the suggested billing.;
                                 ENG=View a list of all jobs, grouped by customer, how much the customer has already been invoiced, and how much remains to be invoiced, that is, the suggested billing.];
                      ApplicationArea=#Jobs;
                      RunObject=Report 1011;
                      Promoted=Yes;
                      Image=Report;
                      PromotedCategory=Report }
      { 1905285006;1 ;Action    ;
                      CaptionML=[ENU=Jobs - Transaction Detail;
                                 ENG=Jobs - Transaction Detail];
                      ToolTipML=[ENU=View all postings with entries for a selected job for a selected period, which have been charged to a certain job. At the end of each job list, the amounts are totaled separately for the Sales and Usage entry types.;
                                 ENG=View all postings with entries for a selected job for a selected period, which have been charged to a certain job. At the end of each job list, the amounts are totalled separately for the Sales and Usage entry types.];
                      ApplicationArea=#Jobs;
                      RunObject=Report 1007;
                      Promoted=No;
                      Image=Report;
                      PromotedCategory=Report }
    }
  }
  CONTROLS
  {
    { 1900000001;0;Container;
                ContainerType=ContentArea }

    { 1   ;1   ;Group     ;
                GroupType=Repeater }

    { 35  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the job task to which the planning line is linked.;
                           ENG=Specifies the number of the job task to which the planning line is linked.];
                ApplicationArea=#All;
                SourceExpr="Job Task No.";
                Visible=JobTaskNoVisible }

    { 4   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the type of planning line.;
                           ENG=Specifies the type of planning line.];
                ApplicationArea=#Jobs;
                SourceExpr="Line Type" }

    { 98  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies whether the Usage Link field applies to the job planning line. When this check box is selected, usage entries are linked to the job planning line. Selecting this check box creates a link to the job planning line from places where usage has been posted, such as the job journal or a purchase line. You can select this check box only if the line type of the job planning line is Budget or Both Budget and Billable.;
                           ENG=Specifies whether the Usage Link field applies to the job planning line. When this check box is selected, usage entries are linked to the job planning line. Selecting this check box creates a link to the job planning line from places where usage has been posted, such as the job journal or a purchase line. You can select this check box only if the line type of the job planning line is Budget or Both Budget and Billable.];
                ApplicationArea=#Jobs;
                SourceExpr="Usage Link";
                Visible=FALSE;
                OnValidate=BEGIN
                             UsageLinkOnAfterValidate;
                           END;
                            }

    { 7   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the date of the planning line. You can use the planning date for filtering the totals of the job, for example, if you want to see the scheduled usage for a specific month of the year.;
                           ENG=Specifies the date of the planning line. You can use the planning date for filtering the totals of the job, for example, if you want to see the scheduled usage for a specific month of the year.];
                ApplicationArea=#Jobs;
                SourceExpr="Planning Date";
                Editable=PlanningDateEditable;
                OnValidate=BEGIN
                             PlanningDateOnAfterValidate;
                           END;
                            }

    { 3   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the date that is planned to deliver the item connected to the job planning line. For a resource, the planned delivery date is the date that the resource performs services with respect to the job.;
                           ENG=Specifies the date that is planned to deliver the item connected to the job planning line. For a resource, the planned delivery date is the date that the resource performs services with respect to the job.];
                ApplicationArea=#Jobs;
                SourceExpr="Planned Delivery Date" }

    { 76  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the date that will be used to find the exchange rate for the currency in the Currency Date field.;
                           ENG=Specifies the date that will be used to find the exchange rate for the currency in the Currency Date field.];
                ApplicationArea=#Jobs;
                SourceExpr="Currency Date";
                Visible=FALSE;
                Editable=CurrencyDateEditable }

    { 9   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies a document number for the planning line.;
                           ENG=Specifies a document number for the planning line.];
                ApplicationArea=#Jobs;
                SourceExpr="Document No.";
                Editable=DocumentNoEditable }

    { 49  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the planning line's entry number.;
                           ENG=Specifies the planning line's entry number.];
                ApplicationArea=#Jobs;
                SourceExpr="Line No.";
                Visible=FALSE }

    { 13  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the type of account to which the planning line relates.;
                           ENG=Specifies the type of account to which the planning line relates.];
                ApplicationArea=#Jobs;
                SourceExpr=Type;
                Editable=TypeEditable;
                OnValidate=BEGIN
                             NoOnAfterValidate;
                           END;
                            }

    { 23  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the account to which the resource, item or general ledger account is posted, depending on your selection in the Type field.;
                           ENG=Specifies the number of the account to which the resource, item or general ledger account is posted, depending on your selection in the Type field.];
                ApplicationArea=#Jobs;
                SourceExpr="No.";
                Editable=NoEditable;
                OnValidate=BEGIN
                             NoOnAfterValidate;
                           END;
                            }

    { 11  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the name of the resource, item, or G/L account to which this entry applies. You can change the description. A maximum of 50 characters, both numbers and letters, are allowed.;
                           ENG=Specifies the name of the resource, item, or G/L account to which this entry applies. You can change the description. A maximum of 50 characters, both numbers and letters, are allowed.];
                ApplicationArea=#Jobs;
                SourceExpr=Description;
                Editable=DescriptionEditable }

    { 78  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the general business posting group that will be used when you post the entry on the journal line.;
                           ENG=Specifies the general business posting group that will be used when you post the entry on the journal line.];
                ApplicationArea=#Jobs;
                SourceExpr="Gen. Bus. Posting Group";
                Visible=FALSE }

    { 80  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the general product posting group that will be used when you post the entry on the journal line.;
                           ENG=Specifies the general product posting group that will be used when you post the entry on the journal line.];
                ApplicationArea=#Jobs;
                SourceExpr="Gen. Prod. Posting Group";
                Visible=FALSE }

    { 82  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies an item variant code if the Type field is Item.;
                           ENG=Specifies an item variant code if the Type field is Item.];
                ApplicationArea=#Jobs;
                SourceExpr="Variant Code";
                Visible=FALSE;
                Editable=VariantCodeEditable;
                OnValidate=BEGIN
                             VariantCodeOnAfterValidate;
                           END;
                            }

    { 65  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies a location code for an item.;
                           ENG=Specifies a location code for an item.];
                SourceExpr="Location Code";
                Visible=FALSE;
                Editable=LocationCodeEditable;
                OnValidate=BEGIN
                             LocationCodeOnAfterValidate;
                           END;
                            }

    { 67  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies which work type the resource applies to. Prices are updated based on this entry.;
                           ENG=Specifies which work type the resource applies to. Prices are updated based on this entry.];
                ApplicationArea=#Jobs;
                SourceExpr="Work Type Code";
                Visible=FALSE;
                Editable=WorkTypeCodeEditable }

    { 21  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies a unit of measure code, which is used in determining the unit price. This code specifies how the quantity is measured. The code is retrieved from the corresponding item or resource card.;
                           ENG=Specifies a unit of measure code, which is used in determining the unit price. This code specifies how the quantity is measured. The code is retrieved from the corresponding item or resource card.];
                ApplicationArea=#Jobs;
                SourceExpr="Unit of Measure Code";
                Visible=FALSE;
                Editable=UnitOfMeasureCodeEditable;
                OnValidate=BEGIN
                             UnitofMeasureCodeOnAfterValida;
                           END;
                            }

    { 5   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies whether or not a reservation can be made for items on the current line. The field is not applicable if the Type field is set to Resource, Cost, or G/L Account.;
                           ENG=Specifies whether or not a reservation can be made for items on the current line. The field is not applicable if the Type field is set to Resource, Cost, or G/L Account.];
                ApplicationArea=#Jobs;
                SourceExpr=Reserve;
                Visible=FALSE;
                OnValidate=BEGIN
                             ReserveOnAfterValidate;
                           END;
                            }

    { 15  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of units of the resource, item, or general ledger account that should be specified on the planning line. If you later change the No., the quantity you have entered remains on the line.;
                           ENG=Specifies the number of units of the resource, item, or general ledger account that should be specified on the planning line. If you later change the No., the quantity you have entered remains on the line.];
                ApplicationArea=#Jobs;
                SourceExpr=Quantity;
                OnValidate=BEGIN
                             QuantityOnAfterValidate;
                           END;
                            }

    { 125 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the quantity of the item that is reserved for the job planning line.;
                           ENG=Specifies the quantity of the item that is reserved for the job planning line.];
                ApplicationArea=#Jobs;
                SourceExpr="Reserved Quantity";
                Visible=FALSE }

    { 86  ;2   ;Field     ;
                ToolTipML=[ENU=This field is automatically updated. The quantity in the field is the Quantity expressed in base units of measure.;
                           ENG=This field is automatically updated. The quantity in the field is the Quantity expressed in base units of measure.];
                ApplicationArea=#Jobs;
                SourceExpr="Quantity (Base)";
                Visible=FALSE }

    { 100 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the remaining quantity of the resource, item, or G/L Account that remains to complete a job. The quantity is calculated as the difference between Quantity and Qty. Posted.;
                           ENG=Specifies the remaining quantity of the resource, item, or G/L Account that remains to complete a job. The quantity is calculated as the difference between Quantity and Qty. Posted.];
                ApplicationArea=#Jobs;
                SourceExpr="Remaining Qty.";
                Visible=FALSE }

    { 43  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the direct unit cost, in the local currency, of one unit of the selected Type and No.;
                           ENG=Specifies the direct unit cost, in the local currency, of one unit of the selected Type and No.];
                ApplicationArea=#Jobs;
                SourceExpr="Direct Unit Cost (LCY)";
                Visible=FALSE;
                Editable=FALSE }

    { 41  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the unit cost for the selected Type and No. on the planning line. The unit cost is in the job currency, which comes from the Currency Code field on the Job Card.;
                           ENG=Specifies the unit cost for the selected Type and No. on the planning line. The unit cost is in the job currency, which comes from the Currency Code field on the Job Card.];
                ApplicationArea=#Jobs;
                SourceExpr="Unit Cost";
                Editable=UnitCostEditable }

    { 26  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the unit cost for the selected Type and No. on the planning line. The unit cost is in the local currency.;
                           ENG=Specifies the unit cost for the selected Type and No. on the planning line. The unit cost is in the local currency.];
                ApplicationArea=#Jobs;
                SourceExpr="Unit Cost (LCY)";
                Visible=FALSE }

    { 74  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the total cost for the planning line. The total cost is in the job currency, which comes from the Currency Code field in the Job Card.;
                           ENG=Specifies the total cost for the planning line. The total cost is in the job currency, which comes from the Currency Code field in the Job Card.];
                ApplicationArea=#Jobs;
                SourceExpr="Total Cost" }

    { 102 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the remaining total cost for the planning line. The total cost is in the job currency, which comes from the Currency Code field in the Job Card.;
                           ENG=Specifies the remaining total cost for the planning line. The total cost is in the job currency, which comes from the Currency Code field in the Job Card.];
                ApplicationArea=#Jobs;
                SourceExpr="Remaining Total Cost";
                Visible=FALSE }

    { 56  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the total cost for the planning line. The amount is in the local currency.;
                           ENG=Specifies the total cost for the planning line. The amount is in the local currency.];
                ApplicationArea=#Jobs;
                SourceExpr="Total Cost (LCY)";
                Visible=FALSE }

    { 104 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the remaining total cost (LCY) for the planning line. The amount is in the local currency.;
                           ENG=Specifies the remaining total cost (LCY) for the planning line. The amount is in the local currency.];
                ApplicationArea=#Jobs;
                SourceExpr="Remaining Total Cost (LCY)";
                Visible=FALSE }

    { 27  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the unit price, in the job currency, of the selected Type and No..;
                           ENG=Specifies the unit price, in the job currency, of the selected Type and No..];
                ApplicationArea=#Jobs;
                SourceExpr="Unit Price";
                Editable=UnitPriceEditable }

    { 58  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the unit price of the selected Type and No.;
                           ENG=Specifies the unit price of the selected Type and No.];
                ApplicationArea=#Jobs;
                SourceExpr="Unit Price (LCY)";
                Visible=FALSE }

    { 20  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the net amount (before subtracting the invoice discount amount) that must be paid for the items on the line.;
                           ENG=Specifies the net amount (before subtracting the invoice discount amount) that must be paid for the items on the line.];
                ApplicationArea=#Jobs;
                SourceExpr="Line Amount";
                Editable=LineAmountEditable }

    { 106 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the net amount of the planning line, in the job currency, which comes from the Currency Code field in the Job Card.;
                           ENG=Specifies the net amount of the planning line, in the job currency, which comes from the Currency Code field in the Job Card.];
                ApplicationArea=#Jobs;
                SourceExpr="Remaining Line Amount";
                Visible=FALSE }

    { 54  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the net amount in (LCY) (before subtracting the invoice discount amount) that must be paid for the items on the line.;
                           ENG=Specifies the net amount in (LCY) (before subtracting the invoice discount amount) that must be paid for the items on the line.];
                ApplicationArea=#Jobs;
                SourceExpr="Line Amount (LCY)";
                Visible=FALSE }

    { 108 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the net amount of the planning line in the local currency.;
                           ENG=Specifies the net amount of the planning line in the local currency.];
                ApplicationArea=#Jobs;
                SourceExpr="Remaining Line Amount (LCY)";
                Visible=FALSE }

    { 45  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the amount of the discount that applies to the planning line.;
                           ENG=Specifies the amount of the discount that applies to the planning line.];
                ApplicationArea=#Jobs;
                SourceExpr="Line Discount Amount";
                Visible=FALSE;
                Editable=LineDiscountAmountEditable }

    { 2   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the line discount percentage.;
                           ENG=Specifies the line discount percentage.];
                ApplicationArea=#Jobs;
                SourceExpr="Line Discount %";
                Visible=FALSE;
                Editable=LineDiscountPctEditable }

    { 52  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the total price in the job currency on the planning line.;
                           ENG=Specifies the total price in the job currency on the planning line.];
                ApplicationArea=#Jobs;
                SourceExpr="Total Price";
                Visible=FALSE }

    { 33  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the total price on the planning line. The total price is in the local currency.;
                           ENG=Specifies the total price on the planning line. The total price is in the local currency.];
                ApplicationArea=#Jobs;
                SourceExpr="Total Price (LCY)";
                Visible=FALSE }

    { 110 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the quantity that has been posted to the job ledger, if the Usage Link check box has been selected.;
                           ENG=Specifies the quantity that has been posted to the job ledger, if the Usage Link check box has been selected.];
                ApplicationArea=#Jobs;
                SourceExpr="Qty. Posted";
                Visible=FALSE }

    { 112 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the quantity you want to transfer to the job journal. Its default value is calculated as quantity minus the quantity that has already been posted, if the Apply Usage Link check box has been selected.;
                           ENG=Specifies the quantity you want to transfer to the job journal. Its default value is calculated as quantity minus the quantity that has already been posted, if the Apply Usage Link check box has been selected.];
                ApplicationArea=#Jobs;
                SourceExpr="Qty. to Transfer to Journal";
                Visible=FALSE }

    { 114 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the total cost that has been posted to the job ledger, if the Usage Link check box has been selected.;
                           ENG=Specifies the total cost that has been posted to the job ledger, if the Usage Link check box has been selected.];
                ApplicationArea=#Jobs;
                SourceExpr="Posted Total Cost";
                Visible=FALSE }

    { 116 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the total cost (LCY) that has been posted to the job ledger, if the Usage Link check box has been selected.;
                           ENG=Specifies the total cost (LCY) that has been posted to the job ledger, if the Usage Link check box has been selected.];
                ApplicationArea=#Jobs;
                SourceExpr="Posted Total Cost (LCY)";
                Visible=FALSE }

    { 118 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the total posted line that has been posted to the job ledger, if the Apply Usage Link check box has been selected.;
                           ENG=Specifies the total posted line that has been posted to the job ledger, if the Apply Usage Link check box has been selected.];
                ApplicationArea=#Jobs;
                SourceExpr="Posted Line Amount";
                Visible=FALSE }

    { 120 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the total posted line (LCY) that has been posted to the job ledger, if the Usage Link check box has been selected.;
                           ENG=Specifies the total posted line (LCY) that has been posted to the job ledger, if the Usage Link check box has been selected.];
                ApplicationArea=#Jobs;
                SourceExpr="Posted Line Amount (LCY)";
                Visible=FALSE }

    { 6   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the quantity that has been transferred to a sales invoice or credit memo.;
                           ENG=Specifies the quantity that has been transferred to a sales invoice or credit memo.];
                ApplicationArea=#Jobs;
                SourceExpr="Qty. Transferred to Invoice";
                Visible=FALSE;
                OnDrillDown=BEGIN
                              DrillDownJobInvoices;
                            END;
                             }

    { 8   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the quantity you want to transfer to the sales invoice or credit memo. The value in this field is calculated as Quantity - Qty. Transferred to Invoice.;
                           ENG=Specifies the quantity you want to transfer to the sales invoice or credit memo. The value in this field is calculated as Quantity - Qty. Transferred to Invoice.];
                ApplicationArea=#Jobs;
                SourceExpr="Qty. to Transfer to Invoice";
                Visible=FALSE }

    { 10  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the quantity that been posted through a sales invoice.;
                           ENG=Specifies the quantity that been posted through a sales invoice.];
                ApplicationArea=#Jobs;
                SourceExpr="Qty. Invoiced";
                Visible=FALSE;
                OnDrillDown=BEGIN
                              DrillDownJobInvoices;
                            END;
                             }

    { 12  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the quantity that remains to be invoiced. It is calculated as Quantity - Qty. Invoiced.;
                           ENG=Specifies the quantity that remains to be invoiced. It is calculated as Quantity - Qty. Invoiced.];
                ApplicationArea=#Jobs;
                SourceExpr="Qty. to Invoice";
                Visible=FALSE }

    { 17  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies, in local currency, the sales amount that was invoiced for this planning line.;
                           ENG=Specifies, in local currency, the sales amount that was invoiced for this planning line.];
                ApplicationArea=#Jobs;
                SourceExpr="Invoiced Amount (LCY)";
                OnDrillDown=BEGIN
                              DrillDownJobInvoices;
                            END;
                             }

    { 37  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies, in the local currency, the cost amount that was invoiced for this planning line.;
                           ENG=Specifies, in the local currency, the cost amount that was invoiced for this planning line.];
                ApplicationArea=#Jobs;
                SourceExpr="Invoiced Cost Amount (LCY)";
                Visible=FALSE;
                OnDrillDown=BEGIN
                              DrillDownJobInvoices;
                            END;
                             }

    { 84  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the ID of the user who last modified the planning line.;
                           ENG=Specifies the ID of the user who last modified the planning line.];
                ApplicationArea=#Jobs;
                SourceExpr="User ID";
                Visible=FALSE }

    { 61  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the serial number that is applied to the posted item if the planning line was created from the posting of a job journal line.;
                           ENG=Specifies the serial number that is applied to the posted item if the planning line was created from the posting of a job journal line.];
                ApplicationArea=#Jobs;
                SourceExpr="Serial No.";
                Visible=FALSE }

    { 63  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the lot number that is applied to the posted item if the planning line was created from the posting of a job journal line.;
                           ENG=Specifies the lot number that is applied to the posted item if the planning line was created from the posting of a job journal line.];
                ApplicationArea=#Jobs;
                SourceExpr="Lot No.";
                Visible=FALSE }

    { 47  ;2   ;Field     ;
                ToolTipML=[ENU=This field is used internally.;
                           ENG=This field is used internally.];
                ApplicationArea=#Jobs;
                SourceExpr="Job Contract Entry No.";
                Visible=FALSE }

    { 92  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the entry type of the job ledger entry associated with the planning line.;
                           ENG=Specifies the entry type of the job ledger entry associated with the planning line.];
                ApplicationArea=#Jobs;
                SourceExpr="Ledger Entry Type";
                Visible=FALSE }

    { 94  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the entry number of the job ledger entry associated with the job planning line.;
                           ENG=Specifies the entry number of the job ledger entry associated with the job planning line.];
                ApplicationArea=#Jobs;
                SourceExpr="Ledger Entry No.";
                Visible=FALSE }

    { 96  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies that an entry has been created by Microsoft Dynamics NAV and is related to a job ledger entry. The check box is selected automatically.;
                           ENG=Specifies that an entry has been created by Microsoft Dynamics NAV and is related to a job ledger entry. The check box is selected automatically.];
                ApplicationArea=#Jobs;
                SourceExpr="System-Created Entry";
                Visible=FALSE }

    { 18  ;2   ;Field     ;
                CaptionML=[ENU=Overdue;
                           ENG=Overdue];
                ToolTipML=[ENU="Specifies that the job is overdue. ";
                           ENG="Specifies that the job is overdue. "];
                ApplicationArea=#Jobs;
                SourceExpr=Overdue;
                Visible=FALSE;
                Editable=FALSE }

    { 1900000007;0;Container;
                ContainerType=FactBoxArea }

    { 1900383207;1;Part   ;
                Visible=FALSE;
                PartType=System;
                SystemPartID=RecordLinks }

    { 1905767507;1;Part   ;
                Visible=FALSE;
                PartType=System;
                SystemPartID=Notes }

  }
  CODE
  {
    VAR
      JobCreateInvoice@1000 : Codeunit 1002;
      ActiveField@1001 : ' ,Cost,CostLCY,PriceLCY,Price';
      Text001@1002 : TextConst 'ENU=This job planning line was automatically generated. Do you want to continue?;ENG=This job planning line was automatically generated. Do you want to continue?';
      JobNo@1003 : Code[20];
      JobTaskNoVisible@19035147 : Boolean INDATASET;
      PlanningDateEditable@19058788 : Boolean INDATASET;
      CurrencyDateEditable@19063095 : Boolean INDATASET;
      DocumentNoEditable@19064841 : Boolean INDATASET;
      TypeEditable@19028748 : Boolean INDATASET;
      NoEditable@19005397 : Boolean INDATASET;
      DescriptionEditable@19061412 : Boolean INDATASET;
      UnitOfMeasureCodeEditable@19052748 : Boolean INDATASET;
      VariantCodeEditable@19003611 : Boolean INDATASET;
      LocationCodeEditable@19048234 : Boolean INDATASET;
      WorkTypeCodeEditable@19027008 : Boolean INDATASET;
      UnitPriceEditable@19072822 : Boolean INDATASET;
      LineDiscountAmountEditable@19003541 : Boolean INDATASET;
      LineDiscountPctEditable@19026131 : Boolean INDATASET;
      LineAmountEditable@19064331 : Boolean INDATASET;
      UnitCostEditable@19057007 : Boolean INDATASET;
      Text002@1005 : TextConst 'ENU=The %1 was successfully transferred to a %2.;ENG=The %1 was successfully transferred to a %2.';
      CanSendToCalendar@1004 : Boolean;

    LOCAL PROCEDURE CreateSalesInvoice@1(CrMemo@1000 : Boolean);
    VAR
      JobPlanningLine@1007 : Record 1003;
      JobCreateInvoice@1006 : Codeunit 1002;
    BEGIN
      TESTFIELD("Line No.");
      JobPlanningLine.COPY(Rec);
      CurrPage.SETSELECTIONFILTER(JobPlanningLine);
      JobCreateInvoice.CreateSalesInvoice(JobPlanningLine,CrMemo)
    END;

    LOCAL PROCEDURE SetEditable@2(Edit@1000 : Boolean);
    BEGIN
      PlanningDateEditable := Edit;
      CurrencyDateEditable := Edit;
      DocumentNoEditable := Edit;
      TypeEditable := Edit;
      NoEditable := Edit;
      DescriptionEditable := Edit;
      UnitOfMeasureCodeEditable := Edit;
      VariantCodeEditable := Edit;
      LocationCodeEditable := Edit;
      WorkTypeCodeEditable := Edit;
      UnitPriceEditable := Edit;
      LineDiscountAmountEditable := Edit;
      LineDiscountPctEditable := Edit;
      LineAmountEditable := Edit;
      UnitCostEditable := Edit;
    END;

    PROCEDURE SetActiveField@3(ActiveField2@1000 : Integer);
    BEGIN
      ActiveField := ActiveField2;
    END;

    PROCEDURE SetJobNo@12(No@1000 : Code[20]);
    BEGIN
      JobNo := No;
    END;

    PROCEDURE SetJobTaskNoVisible@5(NewJobTaskNoVisible@1000 : Boolean);
    BEGIN
      JobTaskNoVisible := NewJobTaskNoVisible;
    END;

    LOCAL PROCEDURE PerformAutoReserve@10();
    BEGIN
      IF (Reserve = Reserve::Always) AND
         ("Remaining Qty. (Base)" <> 0)
      THEN BEGIN
        CurrPage.SAVERECORD;
        AutoReserve;
        CurrPage.UPDATE(FALSE);
      END;
    END;

    LOCAL PROCEDURE UsageLinkOnAfterValidate@19044160();
    BEGIN
      PerformAutoReserve;
    END;

    LOCAL PROCEDURE PlanningDateOnAfterValidate@19037512();
    BEGIN
      IF "Planning Date" <> xRec."Planning Date" THEN
        PerformAutoReserve;
    END;

    LOCAL PROCEDURE NoOnAfterValidate@19066594();
    BEGIN
      IF "No." <> xRec."No." THEN
        PerformAutoReserve;
    END;

    LOCAL PROCEDURE VariantCodeOnAfterValidate@19003320();
    BEGIN
      IF "Variant Code" <> xRec."Variant Code" THEN
        PerformAutoReserve;
    END;

    LOCAL PROCEDURE LocationCodeOnAfterValidate@19034787();
    BEGIN
      IF "Location Code" <> xRec."Location Code" THEN
        PerformAutoReserve;
    END;

    LOCAL PROCEDURE UnitofMeasureCodeOnAfterValida@19057939();
    BEGIN
      PerformAutoReserve;
    END;

    LOCAL PROCEDURE ReserveOnAfterValidate@19004502();
    BEGIN
      PerformAutoReserve;
    END;

    LOCAL PROCEDURE QuantityOnAfterValidate@19032465();
    BEGIN
      PerformAutoReserve;
      IF (Type = Type::Item) AND (Quantity <> xRec.Quantity) THEN
        CurrPage.UPDATE(TRUE);
    END;

    BEGIN
    END.
  }
}

